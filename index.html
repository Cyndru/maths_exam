<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Maths Exam</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 30px;
      background: #f0f8ff;
    }
    #container {
      max-width: 700px;
      margin: auto;
      padding: 20px;
      border-radius: 12px;
      background: white;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
    h1, h2 {
      text-align: center;
      color: #2c3e50;
    }
    input[type=text] {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      font-size: 18px;
    }
    button {
      padding: 10px 20px;
      font-size: 18px;
      border: none;
      border-radius: 8px;
      background: #3498db;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #2980b9;
    }
    #feedback {
      font-weight: bold;
      margin-top: 10px;
    }
    .correct { color: green; }
    .wrong { color: red; }
  </style>
</head>
<body>
  <div id="container">
    <h1>Maths Exam</h1>
    <div id="exam"></div>
  </div>

  <script>
    // Question bank with multiple valid answers
    const questions = [
      { q: "Write the number name for 5,23,47,289", a: [
        "five crore twenty-three lakh forty-seven thousand two hundred eighty-nine",
        "5,23,47,289"
      ]},
      { q: "In 6,73,452, the digit 7 is underlined. Place, place value, face value?", a: [
        "ten-thousands, 70000, 7",
        "ten thousand, 70000, 7"
      ]},
      { q: "Arrange in ascending order: 9,45,672; 6,23,981; 12,34,567; 7,11,110", a: [
        "6,23,981 < 7,11,110 < 9,45,672 < 12,34,567"
      ]},
      { q: "Predecessor and Successor of 10,00,000", a: [
        "9,99,999 and 10,00,001",
        "999999 and 1000001"
      ]},
      { q: "A bus has 52 seats. How many seats in 125 buses?", a: ["6500", "6,500"] },
      { q: "8640 apples packed in 36 boxes. Apples per box?", a: ["240"] }
    ];

    let current = 0;
    let score = 0;
    let studentName = "";

    const examDiv = document.getElementById("exam");

    // Normalize answers (ignore case + spaces + commas)
    function normalize(str) {
      return str.toLowerCase().replace(/\s+/g, " ").replace(/,/g, "").trim();
    }

    function startScreen() {
      examDiv.innerHTML = `
        <h2>Enter Student's Name</h2>
        <input type="text" id="nameInput" placeholder="Your Name">
        <button onclick="startExam()">Start Exam</button>
      `;
    }

    function startExam() {
      studentName = document.getElementById("nameInput").value.trim();
      if (studentName === "") {
        alert("Please enter your name!");
        return;
      }
      showQuestion();
    }

    function showQuestion() {
      if (current < questions.length) {
        examDiv.innerHTML = `
          <h2>Question ${current+1} of ${questions.length}</h2>
          <p>${questions[current].q}</p>
          <input type="text" id="answerInput" placeholder="Type your answer">
          <button onclick="checkAnswer()">Submit</button>
          <p id="feedback"></p>
        `;
      } else {
        showScore();
      }
    }

    function checkAnswer() {
      let userAns = document.getElementById("answerInput").value;
      let correctAnswers = questions[current].a;

      // Normalize both user input & stored answers
      let normalizedUser = normalize(userAns);
      let isCorrect = correctAnswers.some(ans => normalize(ans) === normalizedUser);

      const feedback = document.getElementById("feedback");
      if (isCorrect) {
        feedback.textContent = "✅ Correct!";
        feedback.className = "correct";
        score++;
      } else {
        feedback.textContent = "❌ Wrong!";
        feedback.className = "wrong";
      }

      setTimeout(() => {
        current++;
        showQuestion();
      }, 1000);
    }

    function showScore() {
      examDiv.innerHTML = `
        <h2>Exam Finished!</h2>
        <p>Student: <b>${studentName}</b></p>
        <p>Your Score: <b>${score}</b> / ${questions.length}</p>
      `;
    }

    // Start
    startScreen();
  </script>
</body>
</html>
